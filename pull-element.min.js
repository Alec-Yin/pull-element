/*!
 * @license
 * pull-element.js v1.0.0
 * (c) 2017 Jade Gu
 * Released under the MIT License.
 * https://github.com/Lucifier129/pull-element
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.PullElement=i()}(this,function(){"use strict";function t(t){for(var i=arguments,o=i.length,n=1;n<o;n++){var r=i[n];for(var e in r)t[e]=r[e]}return t}function i(t){return"number"==typeof t&&!isNaN(t)}function o(t){return"function"==typeof t}function n(i){var o=i.scrollTop,n=i.scrollLeft,r=i.offsetWidth,s=i.offsetHeight,l=i.scrollWidth,a=i.scrollHeight,c={scrollTop:o,scrollLeft:n,offsetWidth:r,offsetHeight:s,scrollWidth:l,scrollHeight:a};return t(c,e(c))}function r(i){var o=i.documentElement,n=o.clientWidth,r=o.clientHeight,s=o.scrollWidth,l=o.scrollHeight,a=i.body.scrollTop||o.scrollTop,c=i.body.scrollLeft||o.scrollLeft,h={scrollTop:a,scrollLeft:c,scrollWidth:s,scrollHeight:l,offsetWidth:n,offsetHeight:r};return t(h,e(h))}function e(t){return{isScrollTopEnd:t.scrollTop<=0,isScrollBottomEnd:t.offsetHeight+t.scrollTop>=t.scrollHeight,isScrollLeftEnd:t.scrollLeft<=0,isScrollRightEnd:t.offsetWidth+t.scrollLeft>=t.scrollWidth}}function s(t){return"string"==typeof t?document.querySelector(t):t}function l(t,i,o){t.addEventListener(i,o)}function a(t,i,o){t.removeEventListener(i,o)}function c(t){var i=t.touches[0];return{x:i.clientX,y:i.clientY}}function h(t,n){return o(n)?n(t):i(n)?t/n:t}function u(t,i){var o="translate("+t+"px,"+i+"px)";return{transform:o,webkitTransform:o}}function f(i){this.options=i,this.state=t({},m),this.props=null,this.document=null,this.target=null,this.scroller=null,this.trigger=null,this.isTouching=!1,this.isPreventDefault=!1,this.isWaiting=!1,this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this)}var d={isScrollTopEnd:!0,isScrollLeftEnd:!0,isScrollBottomEnd:!0,isScrollRightEnd:!0},g={transition:"",transform:"",webkitTransform:"",webkitTransition:""},p={top:"onPullDown",bottom:"onPullUp",left:"onPullRight",right:"onPullLeft"},m={scrollTop:0,scrollLeft:0,scrollWidth:0,scrollHeight:0,offsetWidth:0,offsetHeight:0,isScrollTopEnd:!1,isScrollLeftEnd:!1,isScrollBottomEnd:!1,isScrollRightEnd:!1,startX:0,startY:0,moveX:0,moveY:0,offsetX:0,offsetY:0,translateX:0,translateY:0,direction:"",axis:""},T={target:"body",scroller:"",trigger:"",damping:1.6,wait:!0,top:!1,bottom:!1,left:!1,right:!1,isStatic:!1,drag:!1,detectScroll:!1,stopPropagation:!1,transitionProperty:"transform",transitionDuration:"0.3s",transitionTimingFunction:"ease-out"},v="function"==typeof Promise;return t(f.prototype,{init:function(){var i=this.options,o=this.document=window.document,n=this.target=s(i.target),r=this.scroller=i.scroller?s(i.scroller):n;this.trigger=i.trigger?s(i.trigger):n,this.isGlobalScroller=r===o.body||r===window||r===o,this.props=t({},T,this.options),this.enable()},destroy:function(){this.disable()},setTranslate:function(i,o){var n=u(i,o),r={transition:"",webkitTransition:""};t(this.target.style,r,n)},animateTo:function(i,o,n){var r=this.props,e=this.target,s=u(i,o),l={transitionProperty:r.transitionProperty,transitionDuration:r.transitionDuration,transitionTimingFunction:r.transitionTimingFunction,webkitTransitionProperty:r.transitionProperty,webkitTransitionDuration:r.transitionDuration,webkitTransitionTimingFunction:r.transitionTimingFunction},a=Number(r.transitionDuration.replace(/[^.\d]+/g,""));/[\d\.]+s$/.test(r.transitionDuration)&&(a*=1e3);var c=function(i){var o=!1,r=function(){o||(o=!0,n&&n(),i&&i())};t(e.style,l,s),setTimeout(r,a)};return v?new Promise(c):void c()},animateToOrigin:function(i){var o=this,n=function(){o.isWaiting=!1,t(o.target.style,g),i&&i()};return this.animateTo(0,0,n)},enable:function(){l(this.trigger,"touchstart",this.handleTouchStart),l(this.document,"touchmove",this.handleTouchMove),l(this.document,"touchend",this.handleTouchEnd)},disable:function(){a(this.trigger,"touchstart",this.handleTouchStart),a(this.document,"touchmove",this.handleTouchMove),a(this.document,"touchend",this.handleTouchEnd)},preventDefault:function(){this.isPreventDefault=!0},getScrollInfo:function(){var i=null;return i=this.isGlobalScroller?r(this.document):n(this.scroller),this.props.isStatic&&(i=t(i,d)),i},stopPropagationIfNeed:function(t){this.props.stopPropagation&&t.stopPropagation()},detectScrollIfNeed:function(){var i=this.props;!i.isStatic&&i.detectScroll&&t(this.state,this.getScrollInfo())},emit:function(t,i){var n=this.props[t];if(o(n))return n.call(this,this.state,i)},handleTouchStart:function(i){if(!this.isTouching&&!this.isWaiting){var o=c(i);this.state=t({},m,this.getScrollInfo(),{startX:o.x,startY:o.y}),this.stopPropagationIfNeed(i),this.isTouching=!0}},handleTouchMove:function(i){if(this.isTouching){var o=c(i),n=this.props,r=this.state,e=r.startX,s=r.startY,l=o.x,a=o.y,u=l-e,f=a-s,d=r.axis,g=r.direction,m=r.isScrollTopEnd,T=r.isScrollBottomEnd,v=r.isScrollLeftEnd,S=r.isScrollRightEnd;this.detectScrollIfNeed(),d||(d=Math.abs(f)>=Math.abs(u)?"y":"x"),g||("y"===d?r.isScrollTopEnd&&f>0?g="top":r.isScrollBottomEnd&&f<0&&(g="bottom"):"x"===d&&(r.isScrollLeftEnd&&u>0?g="left":r.isScrollRightEnd&&u<0&&(g="right"))),(!v&&r.isScrollLeftEnd||!S&&r.isScrollRightEnd)&&(u=0,e=l),(!m&&r.isScrollTopEnd||!T&&r.isScrollBottomEnd)&&(f=0,s=a);var E=h(u,n.damping),b=h(f,n.damping);if(t(this.state,{startX:e,startY:s,moveX:l,moveY:a,offsetX:u,offsetY:f,translateX:E,translateY:b,direction:g,axis:d}),g){if(!n.drag){if(!(n[p[g]]||n[p[g+"End"]]||n[g]))return;"y"===d?E=0:"x"===d&&(b=0)}if(this.emit(p[g],i),this.isPreventDefault)return void(this.isPreventDefault=!1);this.isWaiting=!0,i.preventDefault(),this.setTranslate(E,b)}}},handleTouchEnd:function(t){if(this.isTouching){this.isTouching=!1;var i=this.state.direction;if(i)return this.emit(p[i]+"End",t),this.isPreventDefault?void(this.isPreventDefault=!1):void this.animateToOrigin()}}}),f});
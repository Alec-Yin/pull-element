/*!
 * @license
 * pull-element.js v1.0.0
 * (c) 2017 Jade Gu
 * Released under the MIT License.
 * https://github.com/Lucifier129/pull-element
 */
!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):t.PullElement=i()}(this,function(){"use strict";function t(t){for(var i=arguments,n=i.length,o=1;o<n;o++){var e=i[o];for(var r in e)t[r]=e[r]}return t}function i(t){return"number"==typeof t&&!isNaN(t)}function n(t){return"function"==typeof t}function o(i){var n=i.scrollTop,o=i.scrollLeft,e=i.offsetWidth,s=i.offsetHeight,l=i.scrollWidth,a=i.scrollHeight,c={scrollTop:n,scrollLeft:o,offsetWidth:e,offsetHeight:s,scrollWidth:l,scrollHeight:a};return t(c,r(c))}function e(i){var n=i.documentElement,o=n.clientWidth,e=n.clientHeight,s=n.scrollWidth,l=n.scrollHeight,a=i.body.scrollTop||n.scrollTop,c=i.body.scrollLeft||n.scrollLeft,h={scrollTop:a,scrollLeft:c,scrollWidth:s,scrollHeight:l,offsetWidth:o,offsetHeight:e};return t(h,r(h))}function r(t){return{isScrollTopEnd:t.scrollTop<=0,isScrollBottomEnd:t.offsetHeight+t.scrollTop>=t.scrollHeight,isScrollLeftEnd:t.scrollLeft<=0,isScrollRightEnd:t.offsetWidth+t.scrollLeft>=t.scrollWidth}}function s(t){return"string"==typeof t?document.querySelector(t):t}function l(t,i,n){t.addEventListener(i,n)}function a(t,i,n){t.removeEventListener(i,n)}function c(t){var i=t.touches[0];return{x:i.clientX,y:i.clientY}}function h(t,o){return n(o)?o(t):i(o)?t/o:t}function u(t,i){var n="translate("+t+"px,"+i+"px)";return{transform:n,webkitTransform:n}}function f(i){this.options=i,this.state=t({},T),this.props=null,this.document=null,this.target=null,this.scroller=null,this.trigger=null,this.isTouching=!1,this.isPreventDefault=!1,this.isWaiting=!1,this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this)}var d={isScrollTopEnd:!0,isScrollLeftEnd:!0,isScrollBottomEnd:!0,isScrollRightEnd:!0},g={transition:"",transform:"",webkitTransform:"",webkitTransition:""},p={top:"onPullDown",bottom:"onPullUp",left:"onPullRight",right:"onPullLeft"},T={scrollTop:0,scrollLeft:0,scrollWidth:0,scrollHeight:0,offsetWidth:0,offsetHeight:0,isScrollTopEnd:!1,isScrollLeftEnd:!1,isScrollBottomEnd:!1,isScrollRightEnd:!1,clientX:0,clientY:0,translateX:0,translateY:0,direction:"",axis:""},m={target:"body",scroller:"",trigger:"",damping:1.6,wait:!0,top:!1,bottom:!1,left:!1,right:!1,isStatic:!1,drag:!1,detectScroll:!1,stopPropagation:!1,transitionProperty:"transform",transitionDuration:"0.3s",transitionTimingFunction:"ease-out"},v="function"==typeof Promise;return t(f.prototype,{init:function(){var i=this.options,n=this.document=window.document,o=this.target=s(i.target),e=this.scroller=i.scroller?s(i.scroller):o;this.trigger=i.trigger?s(i.trigger):o,this.isGlobalScroller=e===n.body||e===window||e===n,this.props=t({},m,this.options),this.enable()},destroy:function(){this.disable()},setTranslate:function(i,n){var o=u(i,n),e={transition:"",webkitTransition:""};t(this.target.style,e,o)},animateTo:function(i,n,o){var e=this.state,r=this.props,s=this.target,l=u(i,n),a={transitionProperty:r.transitionProperty,transitionDuration:r.transitionDuration,transitionTimingFunction:r.transitionTimingFunction,webkitTransitionProperty:r.transitionProperty,webkitTransitionDuration:r.transitionDuration,webkitTransitionTimingFunction:r.transitionTimingFunction},c=Number(r.transitionDuration.replace(/[^.\d]+/g,""));/[\d\.]+s$/.test(r.transitionDuration)&&(c*=1e3);var h=function(i){var n=!1,e=function(){n||(n=!0,o&&o(),i&&i())};t(s.style,a,l),setTimeout(e,c)};return e.translateX=i,e.translateY=n,v?new Promise(h):void h()},animateToOrigin:function(i){var n=this,o=function(){n.isWaiting=!1,t(n.target.style,g),t(n.state,{direction:"",axis:"",translateX:0,translateY:0}),i&&i()};return this.animateTo(0,0,o)},enable:function(){l(this.trigger,"touchstart",this.handleTouchStart),l(this.document,"touchmove",this.handleTouchMove),l(this.document,"touchend",this.handleTouchEnd)},disable:function(){a(this.trigger,"touchstart",this.handleTouchStart),a(this.document,"touchmove",this.handleTouchMove),a(this.document,"touchend",this.handleTouchEnd)},preventDefault:function(){this.isPreventDefault=!0},getScrollInfo:function(){var i=null;return i=this.isGlobalScroller?e(this.document):o(this.scroller),this.props.isStatic&&(i=t(i,d)),i},stopPropagationIfNeed:function(t){this.props.stopPropagation&&t.stopPropagation()},detectScrollIfNeed:function(){var i=this.props;!i.isStatic&&i.detectScroll&&t(this.state,this.getScrollInfo())},emit:function(t,i){var o=this.props[t];if(n(o))return o.call(this,this.state,i)},handleTouchStart:function(i){if(!this.isTouching&&!this.isWaiting){var n=c(i);t(this.state,this.getScrollInfo(),{clientX:n.x,clientY:n.y}),this.stopPropagationIfNeed(i),this.isTouching=!0}},handleTouchMove:function(i){if(this.isTouching){var n=c(i),o=this.props,e=this.state,r=n.x,s=n.y,l=r-e.clientX,a=s-e.clientY,u=e.translateX,f=e.translateY,d=e.axis,g=e.direction;if(this.detectScrollIfNeed(),d||(d=Math.abs(a)>=Math.abs(l)?"y":"x"),g||("y"===d?e.isScrollTopEnd&&a>0?g="top":e.isScrollBottomEnd&&a<0&&(g="bottom"):"x"===d&&(e.isScrollLeftEnd&&l>0?g="left":e.isScrollRightEnd&&l<0&&(g="right"))),g&&(u+=h(l,o.damping),f+=h(a,o.damping)),t(this.state,{clientX:r,clientY:s,translateX:u,translateY:f,direction:g,axis:d}),g){if(!o.drag){if(!o[p[g]]&&!o[p[g+"End"]]&&!o[g])return;"y"===d?u=0:"x"===d&&(f=0)}if(this.emit(p[g],i),this.isPreventDefault)return void(this.isPreventDefault=!1);o.wait&&(this.isWaiting=!0),i.preventDefault(),this.setTranslate(u,f)}}},handleTouchEnd:function(t){if(this.isTouching){this.isTouching=!1;var i=this.state.direction;if(i)return this.emit(p[i]+"End",t),this.isPreventDefault?void(this.isPreventDefault=!1):void this.animateToOrigin()}}}),f});